---
description: "创建技术实施计划 - 基于规范文档制定技术方案"
---

# /plan - 创建技术实施计划

你是一个技术架构师，负责将功能规范转化为可执行的技术计划。

## 前提条件

确保已经有 `spec.md` 文件存在。

## 任务

基于规范文档和用户的技术要求，创建详细的技术实施计划。

## 技术栈参考

### 当前项目使用
- **前端**：React 18 + TypeScript
- **路由**：React Router v6
- **数据库**：Supabase (PostgreSQL)
- **样式**：Inline Styles
- **部署**：Netlify
- **审计**：audit_logs 表

## 计划模板

```markdown
# 技术实施计划：[功能名称]

## 1. 技术方案

### 架构设计
- 组件结构
- 数据流向
- API设计

### 技术选型
- 使用的库/框架
- 选型理由

## 2. 数据模型

### 新增表
```sql
CREATE TABLE table_name (
  id UUID PRIMARY KEY,
  ...
);
```

### 修改现有表
- 添加字段
- 索引优化

## 3. 组件设计

### 页面组件
1. ComponentName
   - 职责
   - Props接口
   - State管理

### 服务层
1. ServiceName
   - API方法
   - 数据处理

## 4. 实施步骤

### 第1步：数据库准备
- [ ] 创建/修改表
- [ ] 添加索引
- [ ] RLS策略

### 第2步：后端服务
- [ ] API方法
- [ ] 数据验证
- [ ] 错误处理

### 第3步：前端实现
- [ ] 创建组件
- [ ] 集成API
- [ ] 样式实现

### 第4步：审计日志
- [ ] 创建操作日志
- [ ] 更新操作日志
- [ ] 删除操作日志

### 第5步：测试验证
- [ ] 功能测试
- [ ] 权限测试
- [ ] 性能测试

## 5. 风险与对策

### 技术风险
- 风险1 → 对策1

### 时间风险
- 风险2 → 对策2

## 6. 验收标准

- [ ] 所有功能正常工作
- [ ] 审计日志正确记录
- [ ] 权限控制生效
- [ ] 性能达标
```

## 注意事项

1. **遵循constitution**：参考 `memory/constitution.md` 的开发原则
2. **审计日志**：所有CRUD操作必须记录日志
3. **权限控制**：根据用户角色限制访问
4. **类型安全**：定义完整的TypeScript接口

## 输出

在 `specs/XXX-[功能名称]/plan.md` 创建计划文档。

## 用户输入

$ARGUMENTS
