# 📱 Google Play Store 上架优化清单

## 🎯 目标
确保骑手 App 符合 Google Play Store 的所有要求，顺利通过审核并上架。

---

## ⚠️ 必须完成的优化项（审核必需）

### 1. 🔒 隐私政策（必需）

**状态**: ✅ **已完成**

**完成内容**:
1. ✅ **创建隐私政策文档**，包含以下内容：
   - ✅ 应用收集的数据类型（位置、用户信息、设备信息等）
   - ✅ 数据收集的目的和用途
   - ✅ 数据存储方式和位置
   - ✅ 数据共享政策（是否与第三方共享）
   - ✅ 用户权利（如何访问、删除数据）
   - ✅ 数据安全措施
   - ✅ 联系方式

2. ✅ **托管隐私政策**：
   - ✅ 在 `market-link-express.com` 创建页面
   - ✅ 路径: `/privacy-policy`
   - ✅ 可公开访问（无需登录）
   - ✅ 支持三种语言（中文、英文、缅甸语）

3. ✅ **在 app.json 中添加隐私政策链接**：
   ```json
   {
     "expo": {
       "privacy": "public",
       "privacyPolicy": "https://market-link-express.com/privacy-policy"
     }
   }
   ```

**隐私政策 URL**: https://market-link-express.com/privacy-policy

**优先级**: 🔴 **最高** - 审核必需

---

### 2. 📱 Android 权限说明（必需）

**状态**: ✅ **已完成**

**已添加权限**:
```json
"permissions": [
  "ACCESS_FINE_LOCATION",
  "ACCESS_COARSE_LOCATION",
  "CAMERA",
  "READ_EXTERNAL_STORAGE",
  "WRITE_EXTERNAL_STORAGE"
]
```

**已添加权限使用说明**（通过 plugins 配置）:
- ✅ **相机权限**: "需要访问相机以扫描包裹二维码和中转码，用于快速识别包裹信息。"
- ✅ **位置权限**: "需要获取您的位置来提供实时配送服务和显示配送路线。"
- ✅ **存储权限**: "需要访问相册以保存包裹配送照片，用于记录配送凭证。"

**配置方式**:
通过 Expo plugins 配置添加权限使用说明：
- `expo-camera` 插件：配置相机权限说明
- `expo-location` 插件：配置位置权限说明
- `expo-media-library` 插件：配置存储权限说明

**优先级**: 🔴 **最高** - 审核必需

---

### 3. 🔑 API 密钥安全（重要）

**状态**: ⚠️ **需要优化**

**问题**:
- Google Maps API Key 直接暴露在 `app.json` 中
- 如果密钥泄露，可能产生费用和安全风险

**需要完成**:

1. **使用环境变量**：
   - 创建 `.env` 文件（不要提交到 Git）
   - 在 `app.json` 中使用环境变量：
     ```json
     "config": {
       "googleMaps": {
         "apiKey": process.env.GOOGLE_MAPS_API_KEY
       }
     }
     ```

2. **配置 API 密钥限制**（在 Google Cloud Console）：
   - 限制 API 密钥只能用于 Android 应用
   - 限制只能从特定包名调用
   - 设置使用配额限制

3. **更新 .gitignore**：
   ```
   .env
   .env.local
   ```

**优先级**: 🟡 **高** - 安全风险

---

### 4. 📸 应用截图和资源（必需）

**状态**: ❌ **未准备**

**需要准备**:

1. **应用截图**（至少 2 张，最多 8 张）：
   - 分辨率: 至少 320px，最大 3840px（长边）
   - 格式: JPG 或 24 位 PNG
   - **建议截图场景**:
     1. 登录页面
     2. 主界面（任务列表）
     3. 地图导航界面
     4. 扫码界面
     5. 包裹详情页
     6. 财务统计页面
     7. 设置页面

2. **功能图标**（可选但推荐）：
   - 尺寸: 1024x500 像素
   - 展示应用主要功能

3. **应用图标检查**：
   - ✅ 已配置 `icon.png` (512x512)
   - ✅ 已配置 `adaptive-icon.png`
   - ⚠️ **需要确认**: 图标尺寸是否符合要求（512x512 像素）

**优先级**: 🔴 **最高** - 审核必需

---

### 5. 📝 应用描述（必需）

**状态**: ✅ **已准备**（在 GOOGLE_PLAY_STORE_GUIDE.md 中）

**需要确认**:
- 简短描述（80字符）: ✅ 已准备
- 完整描述（4000字符）: ✅ 已准备

**优先级**: 🔴 **最高** - 审核必需

---

## 🟡 强烈建议的优化项（提升用户体验）

### 6. 🐛 错误处理和用户体验

**状态**: ⚠️ **需要改进**

**需要完成**:

1. **网络错误处理**：
   - 添加离线模式提示
   - 添加网络重连机制
   - 显示友好的错误消息

2. **权限拒绝处理**：
   - 当用户拒绝权限时，显示引导说明
   - 提供跳转到系统设置的按钮

3. **加载状态**：
   - 所有异步操作显示加载指示器
   - 避免用户等待时的不确定性

**优先级**: 🟡 **高** - 用户体验

---

### 7. 📊 数据收集声明（必需）

**状态**: ⚠️ **需要明确**

**当前应用收集的数据**:
- ✅ 位置信息（GPS）
- ✅ 用户账号信息
- ✅ 设备信息（通过 Supabase）
- ✅ 相机权限（扫描二维码）
- ✅ 存储权限（保存图片）

**需要完成**:

1. **在隐私政策中明确说明**：
   - 收集哪些数据
   - 为什么收集
   - 如何使用
   - 是否与第三方共享（Supabase）

2. **在 Google Play Console 中声明**：
   - 进入应用 → 内容分级 → 数据安全
   - 填写数据收集和使用情况

**优先级**: 🔴 **最高** - 审核必需

---

### 8. 🔐 应用签名配置

**状态**: ✅ **已配置**（eas.json 中）

**需要确认**:
- ✅ `eas.json` 已配置 `app-bundle` 构建类型
- ⚠️ **需要确认**: EAS 签名密钥是否已设置

**优先级**: 🟡 **高** - 发布必需

---

### 9. 📱 目标 Android 版本

**状态**: ⚠️ **需要确认**

**需要检查**:
- 最低支持的 Android 版本
- 目标 Android SDK 版本
- 在 `app.json` 中明确指定：
  ```json
  "android": {
    "minSdkVersion": 21,  // Android 5.0+
    "targetSdkVersion": 34  // Android 14
  }
  ```

**优先级**: 🟡 **中** - 兼容性

---

### 10. 🧪 测试和稳定性

**状态**: ⚠️ **需要充分测试**

**需要完成**:

1. **功能测试**：
   - ✅ 登录/登出
   - ✅ 任务列表
   - ✅ 地图导航
   - ✅ 扫码功能
   - ✅ 包裹状态更新
   - ✅ 财务统计

2. **兼容性测试**：
   - 不同 Android 版本（5.0+）
   - 不同屏幕尺寸
   - 不同网络环境（WiFi、4G、离线）

3. **性能测试**：
   - 应用启动时间
   - 内存使用情况
   - 电池消耗

4. **崩溃报告**：
   - 集成崩溃报告工具（如 Sentry）
   - 监控应用稳定性

**优先级**: 🟡 **高** - 用户体验

---

## 🟢 可选优化项（提升应用质量）

### 11. 🌐 多语言支持

**状态**: ✅ **已完成**

**当前支持**:
- ✅ 中文
- ✅ 英文
- ✅ 缅甸语

**优先级**: 🟢 **低** - 已完成

---

### 12. 🎨 UI/UX 优化

**状态**: ✅ **基本完成**

**建议改进**:
- 添加深色模式支持（可选）
- 优化动画效果
- 改进加载状态显示

**优先级**: 🟢 **低** - 可选

---

### 13. 📱 应用内更新

**状态**: ✅ **已配置**（Expo Updates）

**当前配置**:
- ✅ `runtimeVersion` 已设置
- ✅ `updates.url` 已配置

**优先级**: 🟢 **低** - 已完成

---

## 📋 完整检查清单

### 必需项（审核必需）
- [ ] **隐私政策 URL** - 创建并托管
- [ ] **Android 权限说明** - 添加所有权限和使用说明
- [ ] **应用截图** - 准备至少 2 张截图
- [ ] **应用描述** - 简短描述和完整描述
- [ ] **内容分级** - 完成分级问卷
- [ ] **数据收集声明** - 在 Google Play Console 中填写

### 重要项（强烈建议）
- [ ] **API 密钥安全** - 使用环境变量和限制
- [ ] **错误处理** - 完善错误处理和用户提示
- [ ] **应用签名** - 确认 EAS 签名配置
- [ ] **目标 Android 版本** - 明确指定 SDK 版本
- [ ] **测试** - 充分测试所有功能

### 可选项（提升质量）
- [ ] **崩溃报告** - 集成 Sentry 或其他工具
- [ ] **性能优化** - 优化启动时间和内存使用
- [ ] **UI/UX 改进** - 深色模式、动画等

---

## 🚀 立即行动项

### 第一步：创建隐私政策（最高优先级）
1. 创建隐私政策文档
2. 托管在网站上
3. 添加到 `app.json`

### 第二步：完善权限配置
1. 添加所有使用的权限
2. 添加权限使用说明
3. 测试权限请求流程

### 第三步：准备应用资源
1. 准备应用截图（至少 2 张）
2. 确认图标尺寸（512x512）
3. 准备功能图标（可选）

### 第四步：安全优化
1. 将 API 密钥移到环境变量
2. 配置 API 密钥限制
3. 更新 .gitignore

---

## 📞 需要帮助？

- **隐私政策模板**: 可以参考 Google Play 的隐私政策指南
- **权限说明**: 参考 Android 官方文档
- **截图工具**: 使用 Android Studio 的模拟器或真实设备

---

## ✅ 完成后

完成所有必需项后，应用就可以提交到 Google Play Store 进行审核了！

**预计完成时间**: 1-2 个工作日（如果专注完成必需项）

